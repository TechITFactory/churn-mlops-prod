# Staging environment values
# Override default values for staging deployment

# Global replica count
replicaCount: 1

# Image configuration
images:
  api:
    repository: techitfactory/churn-api
    tag: "staging"
    pullPolicy: Always
  ml:
    repository: techitfactory/churn-ml
    tag: "staging"
    pullPolicy: Always
  busybox:
    repository: busybox
    tag: "1.36"
    pullPolicy: IfNotPresent

# Persistent Volume Claim configuration
pvc:
  name: churn-mlops-data-staging
  accessModes:
    - ReadWriteOnce
  size: 10Gi

# ConfigMap configuration
configMap:
  name: churn-mlops-config-staging

# Service configuration
service:
  name: churn-mlops-api-staging
  port: 80
  type: ClusterIP

# Resource configuration
resources:
  api:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  ml:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi

# Seed job configuration
seedJob:
  enabled: true
  backoffLimit: 1

api:
  replicaCount: 1
  
  ingress:
    enabled: true
    hosts:
      - host: churn-api-staging.example.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: churn-api-staging-tls
        hosts:
          - churn-api-staging.example.com
  
  autoscaling:
    enabled: false
  
  env:
    - name: CHURN_MLOPS_CONFIG
      value: /app/config/config.yaml
    - name: LOG_LEVEL
      value: DEBUG
    - name: ENVIRONMENT
      value: staging

# ML jobs configuration (not API resources)
ml:
  enabled: true

# Less frequent jobs in staging
batchScore:
  enabled: true
  schedule: "0 8 * * *"  # Daily at 8 AM

retrain:
  enabled: false  # Disable automatic retraining in staging

driftMonitoring:
  enabled: true
  schedule: "0 9 * * *"  # Daily at 9 AM

persistence:
  size: 5Gi
  volumes:
    data:
      size: 5Gi
    artifacts:
      size: 10Gi

podDisruptionBudget:
  enabled: false
